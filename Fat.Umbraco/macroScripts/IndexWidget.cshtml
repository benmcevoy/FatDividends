<div id="indexChart" class="widget">
    <section>
        <h3>Market Last 30 Days</h3>
        <div id="marketIndexChart"></div>
    </section>
</div>

<script type="text/javascript">
    google.load('visualization', '1.0', { 'packages': ['linechart'] });
    google.setOnLoadCallback(drawVisualization);

    function drawVisualization() {
        $.ajax({
            url: '/api/indexquote/'
        }).done(function (data) {
            
            // reproject to google format (array of array)
            data = $.map(data, function (value, key) { return [[value.Price, value.Date]]; });

            // Create and populate the data table.
            var chartData = google.visualization.arrayToDataTable(data);

            chartData.addColumn('number', 'Price');

            // Create and draw the visualization.
            new google.visualization.LineChart(document.getElementById('marketIndexChart')).
                draw(chartData, {
                    curveType: 'function',
                    width: 360, height: 180,
                    legend: 'none',
                    pointSize: 1,
                    colors: ['#17A9DA']
                });
        });
    };
</script>
